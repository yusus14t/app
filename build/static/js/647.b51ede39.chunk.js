"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[647],{1647:function(e,s,n){n.r(s),n.d(s,{default:function(){return f}});var i=n(4165),r=n(1413),t=n(5861),l=n(9439),a=n(2791),c=n(1936),d=n(9806),o=n(1632),u=n(5403),m=n(2373),p=n(7689),x=n(1087),h=n(8699),v=n(1134),b=n(2391),g=n(7421),j=n(6020),N=n(184),f=function(){var e,s,n,f,w,y,Z=(0,p.TH)().state,k=(0,v.cI)({onChange:!0}),S=k.register,E=(k.reset,k.handleSubmit),T=(k.formState.errors,(0,a.useRef)(null)),I=(0,a.useRef)(null),O=(0,m.Z)(),q=(0,a.useState)(!1),F=(0,l.Z)(q,2),A=F[0],C=F[1],M=(0,a.useState)({}),_=(0,l.Z)(M,2),R=_[0],P=_[1],G=(0,a.useState)({}),J=(0,l.Z)(G,2),L=(J[0],J[1]),X="SIGNUP_FORM",z="USER_TYPES_FORM",U="PATIENT_FORM",H="ORGANIZATION_FORM",D=(0,a.useState)(X),V=(0,l.Z)(D,2),B=V[0],Y=V[1],K=(0,a.useState)([]),Q=(0,l.Z)(K,2),W=(Q[0],Q[1]),$=(0,a.useState)({name:"",phone:"",age:"",gender:""}),ee=(0,l.Z)($,2),se=ee[0],ne=ee[1];(0,a.useEffect)((function(){ae()}),[]);var ie=function(){var e=(0,t.Z)((0,i.Z)().mark((function e(s){var n,t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s){e.next=4;break}return O.error("Enter number"),e.abrupt("return");case 4:return e.next=6,u.be.post("/signup",(0,r.Z)((0,r.Z)({},se),{},{phone:s}));case 6:n=e.sent,t=n.data,P(null===t||void 0===t?void 0:t.user),ne((0,r.Z)((0,r.Z)({},se),{},{phone:s})),C(!0),411===(null===t||void 0===t?void 0:t.status_code)?O.error(null===t||void 0===t?void 0:t.message):O.success(null===t||void 0===t?void 0:t.message),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),O.error(null===e.t0||void 0===e.t0?void 0:e.t0.message),console.error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(s){return e.apply(this,arguments)}}(),re=function(){var e=(0,t.Z)((0,i.Z)().mark((function e(){var s,n,r,t,l,a,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.be.post("/validate-otp",{otp:I.current.value,userId:null===R||void 0===R?void 0:R._id});case 3:t=e.sent,l=t.data,localStorage.setItem("user",JSON.stringify(null===l||void 0===l?void 0:l.user)),localStorage.setItem("token",JSON.stringify(null===l||void 0===l?void 0:l.token)),null!==l&&void 0!==l&&null!==(s=l.user)&&void 0!==s&&null!==(n=s.twoFactor)&&void 0!==n&&n.isVerified&&null!==l&&void 0!==l&&null!==(r=l.user)&&void 0!==r&&r.isActive?null!==Z&&void 0!==Z&&Z.redirectTo?window.location.replace(Z.redirectTo):window.location.replace(null===(a=h._A[null===l||void 0===l||null===(c=l.user)||void 0===c?void 0:c.userType])||void 0===a?void 0:a.path):Y(z),O.success(null===l||void 0===l?void 0:l.message),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),O.error(null===e.t0||void 0===e.t0?void 0:e.t0.message),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=(0,t.Z)((0,i.Z)().mark((function e(s){var n,r,t,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.be.post("/common/set-usertype",{type:s,userId:R._id,organizationId:null===R||void 0===R?void 0:R.organizationId},(0,u.Ek)());case 3:t=e.sent,l=t.data,L(s),localStorage.setItem("user",JSON.stringify(null===l||void 0===l?void 0:l.user)),"patient"===s?Y(U):["hospital","clinic"].includes(s)?Y(H):window.location.replace(null===(n=h._A[null===l||void 0===l||null===(r=l.user)||void 0===r?void 0:r.userType])||void 0===n?void 0:n.path),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(s){return e.apply(this,arguments)}}(),le=function(){var e=(0,t.Z)((0,i.Z)().mark((function e(s){var n,r,t,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s.phone=R.phone,!["hospital","clinic"].includes(s.source)){e.next=11;break}return s.isLogin=!0,e.next=6,u.be.post("common/create-hospital",s,(0,u.Ek)());case 6:n=e.sent,null!==(r=n.data)&&void 0!==r&&r.isActive&&(localStorage.setItem("user",JSON.stringify(null===r||void 0===r?void 0:r.organization)),window.location.reload()),e.next=18;break;case 11:if("patient"!==s.source){e.next=18;break}return s._id=null===R||void 0===R?void 0:R._id,e.next=15,u.be.post("/patient/patient-details",s,(0,u.Ek)());case 15:t=e.sent,null!==(l=t.data)&&void 0!==l&&l.isActive&&(localStorage.setItem("user",JSON.stringify(null===l||void 0===l?void 0:l.user)),null!==Z&&void 0!==Z&&Z.redirectTo?window.location.replace(Z.redirectTo):window.location.replace("/patient"));case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.error(e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(s){return e.apply(this,arguments)}}(),ae=function(){var e=(0,t.Z)((0,i.Z)().mark((function e(){var s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.Jx)();case 2:s=e.sent,W(s.data.images);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,N.jsx)("div",{className:"bg-primary",style:{height:"100vh"},children:(0,N.jsxs)(j.Z,{className:"login-page mb-0 px-2",children:[(0,N.jsx)("div",{className:"login-img-container",children:(0,N.jsx)("img",{className:"w-100 py-3",src:c})}),B===X&&(0,N.jsxs)("div",{className:" d-flex flex-column align-items-center bg-white curved w-100 p-4 parent-div ",children:[(0,N.jsx)("h4",{className:"m-0",children:" Login/SignUp"}),A?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{className:"mobile text-dark",children:[(0,N.jsx)("p",{className:"mb-1 text-dark ",children:"Mobile Number"}),(0,N.jsxs)("h4",{className:"text-muted rounded bg-light p-2",children:["+91 \xa0","".concat(String((null===se||void 0===se?void 0:se.phone)||"").slice(0,3),"-").concat(String((null===se||void 0===se?void 0:se.phone)||"").slice(3,6),"-").concat(String((null===se||void 0===se?void 0:se.phone)||"").slice(6,10)),(0,N.jsx)("span",{children:(0,N.jsx)(d.G,{onClick:function(){C(!1),T.current.value=se.phone},className:"cursor-pointer medit ml-1 text",icon:o.Xcf})})]})]}),(0,N.jsxs)("div",{className:"mb-2 mt-4 d-flex flex-column",children:[(0,N.jsx)("label",{className:" ",children:"Enter OTP"}),(0,N.jsx)("input",{className:"login-input text-center ls8 rounded border-0 bg-light p-2",placeholder:"XXXX",type:"text",maxLength:4,inputMode:"numeric",ref:I})]}),(0,N.jsx)("div",{className:"mt-3",children:(0,N.jsx)("button",{className:"btn btn-primary mt-3",onClick:re,children:"Validate OTP"})})]}):(0,N.jsxs)("div",{children:[(0,N.jsxs)("div",{className:"mb-2 mt-4 d-flex flex-column",children:[(0,N.jsx)("label",{className:" ",children:"Enter Mobile Number"}),(0,N.jsx)("input",{className:"login-input rounded border-0 ls8 text-center bg-light p-2",placeholder:"8218397850",type:"text",maxLength:10,inputMode:"numeric",ref:T,onChange:u.y4})]}),(0,N.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,N.jsx)("input",{className:"checkbox",type:"checkbox"}),(0,N.jsx)("span",{className:"mb-0 mx-2",children:(0,N.jsxs)(x.rU,{to:"/terms",children:[" ","Agree to the"," ",(0,N.jsx)("span",{className:"mb-0 text-primary",children:"terms and conditions"})]})})]}),(0,N.jsx)("div",{className:"mt-3",children:(0,N.jsx)("button",{className:"btn btn-primary shadow-none mt-3",onClick:function(){return ie(T.current.value)},children:"Send OTP"})})]})]}),B===z&&(0,N.jsxs)("div",{className:"d-flex flex-column align-items-center bg-white curved w-100 p-4 parent-div",children:[(0,N.jsxs)("div",{className:"patient text-center",onClick:function(){return te("patient")},children:[(0,N.jsx)(d.G,{className:"text-dark ",style:{fontSize:"60px"},icon:o.u13}),(0,N.jsx)("p",{className:"mb-0 mt-1",children:(0,N.jsx)("strong",{className:"text-dark  fs-6 ",children:"Patients"})}),(0,N.jsx)("p",{className:"mb-0 text-muted  fs-12",children:"To Book Appointment"})]}),(0,N.jsxs)("div",{className:"signup-items",children:[(0,N.jsxs)("div",{className:"signup-item text-center ",onClick:function(){return te("clinic")},children:[(0,N.jsx)("div",{className:"signup-icons ",children:(0,N.jsx)("img",{className:"w-100 h-100",src:b})}),(0,N.jsxs)("p",{className:"mb-0 detail",children:["To register your ",(0,N.jsx)("strong",{className:"fs-6",children:"Clinic"})]})]}),(0,N.jsxs)("div",{style:{marginLeft:"20px"},className:"signup-item text-center",onClick:function(){return te("hospital")},children:[(0,N.jsx)("div",{className:"signup-icons ",children:(0,N.jsx)("img",{className:"w-100 h-100",src:g})}),(0,N.jsxs)("p",{className:"mb-0 detail",children:["To register your ",(0,N.jsx)("strong",{className:"fs-6",children:"Hospitals"})]})]})]})]}),(0,N.jsxs)("form",{className:"d-flex justify-content-center w-100",onSubmit:E(le),children:[B===U&&(0,N.jsxs)("div",{className:" d-flex flex-column align-items-center bg-white curved  p-4 parent-div ",children:[(0,N.jsx)("h4",{children:"Fill your datails"}),(0,N.jsxs)("div",{className:"mb-2 w-100",children:[(0,N.jsx)("label",{htmlFor:"",children:"Mobile Number"}),(0,N.jsxs)("h4",{className:"mb-2 text-disabled",children:["+91 ",null===se||void 0===se||null===(e=se.phone)||void 0===e?void 0:e.slice(0,3),"-",null===se||void 0===se||null===(s=se.phone)||void 0===s?void 0:s.slice(3,6),"-",null===se||void 0===se||null===(n=se.phone)||void 0===n?void 0:n.slice(-4)]})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("input",(0,r.Z)({type:"hidden",value:"patient"},S("source"))),(0,N.jsxs)("div",{className:"w-100 mb-3",children:[(0,N.jsxs)("label",{children:["Full Name ",(0,N.jsx)("span",{className:"text-anger",children:"*"})]})," ",(0,N.jsx)("br",{}),(0,N.jsx)("input",(0,r.Z)({type:"text",className:"login-input w-100 rounded border-0 bg-light p-2",placeholder:"Enter full name"},S("name",{required:"name is required"})))]}),(0,N.jsxs)("div",{className:"d-flex mb-3",children:[(0,N.jsxs)("div",{className:"",children:[(0,N.jsxs)("label",{children:["Age ",(0,N.jsx)("span",{children:"*"})]})," ",(0,N.jsx)("br",{}),(0,N.jsx)("input",(0,r.Z)((0,r.Z)({placeholder:"Enter age"},S("age",{required:"age is required"})),{},{className:"login-input rounded border-0 w-100  bg-light p-2 "}))]}),(0,N.jsxs)("div",{children:[(0,N.jsxs)("label",{children:["Gender ",(0,N.jsx)("span",{children:"*"})]})," ",(0,N.jsx)("br",{}),(0,N.jsxs)("select",(0,r.Z)((0,r.Z)({className:"login-input rounded border-0 ms-1 bg-light p-2 "},S("gender",{required:"Gender is required"})),{},{style:{width:"105px",height:"39px"},children:[(0,N.jsx)("option",{value:"Female",children:"Female"}),(0,N.jsx)("option",{value:" Male",children:"Male"}),(0,N.jsx)("option",{value:"other",children:"Other"})]}))]})]}),(0,N.jsxs)("div",{className:"w-100 mb-3",children:[(0,N.jsxs)("label",{children:["Father Name ",(0,N.jsx)("span",{className:"text-anger",children:"*"})]}),(0,N.jsx)("br",{}),(0,N.jsx)("input",(0,r.Z)({type:"text",className:"login-input w-100 rounded border-0 bg-light p-2",placeholder:"Enter father name."},S("fatherName")))]}),(0,N.jsxs)("div",{className:"w-100 mb-4",children:[(0,N.jsxs)("label",{children:["Address ",(0,N.jsx)("span",{className:"text-anger",children:"*"})]})," ",(0,N.jsx)("br",{}),(0,N.jsx)("input",(0,r.Z)({type:"text",className:"login-input w-100 rounded border-0 bg-light p-2",placeholder:"Enter address"},S("address",{required:"address is required"})))]}),(0,N.jsx)("button",{className:"btn btn-primary shadow-none  w-100 py-2",type:"submit",children:"Save"})]})]}),B===H&&(0,N.jsxs)("div",{className:"d-flex flex-column align-items-center bg-white curved w-100 p-4 parent-div2 ",children:[(0,N.jsx)("h4",{children:"Fill your datails"}),(0,N.jsxs)("div",{className:"mb-2 w-100",children:[(0,N.jsx)("label",{htmlFor:"",children:"Mobile Number"}),(0,N.jsxs)("h4",{className:"mb-2 text-disabled",children:["+91 ",null===se||void 0===se||null===(f=se.phone)||void 0===f?void 0:f.slice(0,3),null===se||void 0===se||null===(w=se.phone)||void 0===w?void 0:w.slice(3,6),null===se||void 0===se||null===(y=se.phone)||void 0===y?void 0:y.slice(-4)]})]}),(0,N.jsxs)("div",{className:"w-100 mb-3",children:[(0,N.jsxs)("label",{children:["Registration Number",(0,N.jsx)("span",{className:"text-anger",children:"*"})]})," ",(0,N.jsx)("br",{}),(0,N.jsx)("input",(0,r.Z)({type:"text",className:"login-input w-100 rounded border-0 bg-light p-2",placeholder:"Enter registration no."},S("registrationNo",{required:"Registration number is required"})))]}),(0,N.jsxs)("div",{className:"w-100 mb-3",children:[(0,N.jsxs)("label",{children:["Clinic / Hospital Name",(0,N.jsx)("span",{className:"text-anger",children:"*"})]})," ",(0,N.jsx)("br",{}),(0,N.jsx)("input",(0,r.Z)({type:"text",className:"login-input w-100 rounded border-0 bg-light p-2",placeholder:"Enter name"},S("name",{required:"name is required"})))]}),(0,N.jsxs)("div",{className:"w-100 mb-3",children:[(0,N.jsxs)("label",{children:["Email ID ",(0,N.jsx)("span",{className:"text-anger",children:"*"})]})," ",(0,N.jsx)("br",{}),(0,N.jsx)("input",(0,r.Z)({type:"text",className:"login-input w-100 rounded border-0 bg-light p-2",placeholder:"Enter email ID"},S("email",{required:"Email is required"})))]}),(0,N.jsx)("div",{className:"w-100",children:(0,N.jsx)("button",{className:"btn btn-primary py-2 shadow-none w-100",children:"Save"})})]})]})]})})}}}]);
//# sourceMappingURL=647.b51ede39.chunk.js.map